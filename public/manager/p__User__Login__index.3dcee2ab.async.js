"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[366],{1536:function(de,N,e){var b=e(18534),u=e(28730),z=e(57596),O=e(65589),k=e(28955),I=e(42402),G=e(71770),$=e(50959),R=e(53208),r=e(11527),y=["fieldProps","proFieldProps"],Y=["fieldProps","proFieldProps"],E="text",Q=function(l){var n=l.fieldProps,x=l.proFieldProps,v=(0,z.Z)(l,y);return(0,r.jsx)(R.Z,(0,u.Z)({valueType:E,fieldProps:n,filedConfig:{valueType:E},proFieldProps:x},v))},K=function(l){var n=(0,O.Z)(l.open||!1,{value:l.open,onChange:l.onOpenChange}),x=(0,b.Z)(n,2),v=x[0],C=x[1];return(0,r.jsx)(k.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(W){var P,t=W.getFieldValue(l.name||[]);return(0,r.jsx)(I.Z,(0,u.Z)((0,u.Z)({getPopupContainer:function(c){return c&&c.parentNode?c.parentNode:c},onOpenChange:C,content:(0,r.jsxs)("div",{style:{padding:"4px 0"},children:[(P=l.statusRender)===null||P===void 0?void 0:P.call(l,t),l.strengthText?(0,r.jsx)("div",{style:{marginTop:10},children:(0,r.jsx)("span",{children:l.strengthText})}):null]}),overlayStyle:{width:240},placement:"right"},l.popoverProps),{},{open:v,children:l.children}))}})},X=function(l){var n=l.fieldProps,x=l.proFieldProps,v=(0,z.Z)(l,Y),C=(0,$.useState)(!1),D=(0,b.Z)(C,2),W=D[0],P=D[1];return n!=null&&n.statusRender&&v.name?(0,r.jsx)(K,{name:v.name,statusRender:n==null?void 0:n.statusRender,popoverProps:n==null?void 0:n.popoverProps,strengthText:n==null?void 0:n.strengthText,open:W,onOpenChange:P,children:(0,r.jsx)(R.Z,(0,u.Z)({valueType:"password",fieldProps:(0,u.Z)((0,u.Z)({},(0,G.Z)(n,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(A){var c;n==null||(c=n.onBlur)===null||c===void 0||c.call(n,A),P(!1)},onClick:function(A){var c;n==null||(c=n.onClick)===null||c===void 0||c.call(n,A),P(!0)}}),proFieldProps:x,filedConfig:{valueType:E}},v))}):(0,r.jsx)(R.Z,(0,u.Z)({valueType:"password",fieldProps:n,proFieldProps:x,filedConfig:{valueType:E}},v))},B=Q;B.Password=X,B.displayName="ProFormComponent",N.Z=B},36583:function(de,N,e){e.r(N),e.d(N,{default:function(){return Ce}});var b=e(90228),u=e.n(b),z=e(26068),O=e.n(z),k=e(87999),I=e.n(k),G=e(83370),$=e(52638),R=e(64980),r=e(28730),y=e(50959),Y={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M832 464h-68V240c0-70.7-57.3-128-128-128H388c-70.7 0-128 57.3-128 128v224h-68c-17.7 0-32 14.3-32 32v384c0 17.7 14.3 32 32 32h640c17.7 0 32-14.3 32-32V496c0-17.7-14.3-32-32-32zM332 240c0-30.9 25.1-56 56-56h248c30.9 0 56 25.1 56 56v224H332V240zm460 600H232V536h560v304zM484 701v53c0 4.4 3.6 8 8 8h40c4.4 0 8-3.6 8-8v-53a48.01 48.01 0 10-56 0z"}}]},name:"lock",theme:"outlined"},E=Y,Q=e(69164),K=function(a,s){return y.createElement(Q.Z,(0,r.Z)((0,r.Z)({},a),{},{ref:s,icon:E}))};K.displayName="LockOutlined";var X=y.forwardRef(K),B=e(57596),H=e(40471),l=e(72772),n=e(82187),x=e.n(n),v=e(54885),C=e(20237),D=e(22222),W=function(a){return(0,C.Z)((0,C.Z)({},a.componentCls,{"&-container":{display:"flex",flex:"1",flexDirection:"column",height:"100%",paddingInline:32,paddingBlock:24,overflow:"auto",background:"inherit"},"&-top":{textAlign:"center"},"&-header":{display:"flex",alignItems:"center",justifyContent:"center",height:"44px",lineHeight:"44px",a:{textDecoration:"none"}},"&-title":{position:"relative",insetBlockStart:"2px",color:"@heading-color",fontWeight:"600",fontSize:"33px"},"&-logo":{width:"44px",height:"44px",marginInlineEnd:"16px",verticalAlign:"top",img:{width:"100%"}},"&-desc":{marginBlockStart:"12px",marginBlockEnd:"40px",color:a.colorTextSecondary,fontSize:a.fontSize},"&-main":{minWidth:"328px",maxWidth:"580px",margin:"0 auto","&-other":{marginBlockStart:"24px",lineHeight:"22px",textAlign:"start"}}}),"@media (min-width: @screen-md-min)",(0,C.Z)({},"".concat(a.componentCls,"-container"),{paddingInline:0,paddingBlockStart:32,paddingBlockEnd:24,backgroundRepeat:"no-repeat",backgroundPosition:"center 110px",backgroundSize:"100%"}))};function P(o){return(0,D.Xj)("LoginForm",function(a){var s=(0,r.Z)((0,r.Z)({},a),{},{componentCls:".".concat(o)});return[W(s)]})}var t=e(11527),A=["logo","message","contentStyle","title","subTitle","actions","children","containerStyle","otherStyle"];function c(o){var a,s=o.logo,S=o.message,L=o.contentStyle,j=o.title,g=o.subTitle,U=o.actions,w=o.children,F=o.containerStyle,f=o.otherStyle,i=(0,B.Z)(o,A),m=(0,H.YB)(),h=i.submitter===!1?!1:(0,r.Z)((0,r.Z)({searchConfig:{submitText:m.getMessage("loginForm.submitText","\u767B\u5F55")}},i.submitter),{},{submitButtonProps:(0,r.Z)({size:"large",style:{width:"100%"}},(a=i.submitter)===null||a===void 0?void 0:a.submitButtonProps),render:function(ee,ie){var te,Te=ie.pop();if(typeof(i==null||(te=i.submitter)===null||te===void 0?void 0:te.render)=="function"){var V,ne;return i==null||(V=i.submitter)===null||V===void 0||(ne=V.render)===null||ne===void 0?void 0:ne.call(V,ee,ie)}return Te}}),p=(0,y.useContext)(l.ZP.ConfigContext),T=p.getPrefixCls("pro-form-login"),J=P(T),d=J.wrapSSR,q=J.hashId,Z=function(ee){return"".concat(T,"-").concat(ee," ").concat(q)},_=(0,y.useMemo)(function(){return s?typeof s=="string"?(0,t.jsx)("img",{src:s}):s:null},[s]);return d((0,t.jsxs)("div",{className:x()(Z("container"),q),style:F,children:[(0,t.jsxs)("div",{className:"".concat(Z("top")," ").concat(q).trim(),children:[j||_?(0,t.jsxs)("div",{className:"".concat(Z("header")),children:[_?(0,t.jsx)("span",{className:Z("logo"),children:_}):null,j?(0,t.jsx)("span",{className:Z("title"),children:j}):null]}):null,g?(0,t.jsx)("div",{className:Z("desc"),children:g}):null]}),(0,t.jsxs)("div",{className:Z("main"),style:(0,r.Z)({width:328},L),children:[(0,t.jsxs)(v.A,(0,r.Z)((0,r.Z)({isKeyPressSubmit:!0},i),{},{submitter:h,children:[S,w]})),U?(0,t.jsx)("div",{className:Z("main-other"),style:f,children:U}):null]})]}))}var re=e(1536),oe=e(1253),ue=e(43772),ce=e(57572),ae=e(53208),ge=["options","fieldProps","proFieldProps","valueEnum"],ve=y.forwardRef(function(o,a){var s=o.options,S=o.fieldProps,L=o.proFieldProps,j=o.valueEnum,g=(0,B.Z)(o,ge);return(0,t.jsx)(ae.Z,(0,r.Z)({ref:a,valueType:"checkbox",valueEnum:(0,oe.h)(j,void 0),fieldProps:(0,r.Z)({options:s},S),lightProps:(0,r.Z)({labelFormatter:function(){return(0,t.jsx)(ae.Z,(0,r.Z)({ref:a,valueType:"checkbox",mode:"read",valueEnum:(0,oe.h)(j,void 0),filedConfig:{customLightMode:!0},fieldProps:(0,r.Z)({options:s},S),proFieldProps:L},g))}},g.lightProps),proFieldProps:L},g))}),fe=y.forwardRef(function(o,a){var s=o.fieldProps,S=o.children;return(0,t.jsx)(ue.Z,(0,r.Z)((0,r.Z)({ref:a},s),{},{children:S}))}),me=(0,ce.G)(fe,{valuePropName:"checked"}),se=me;se.Group=ve;var he=se,M=e(11805),pe=e(49733),le=e(66795),xe=e(72413),Pe=e(10422),ye=e(32915),Me=e(62698),Se=(0,ye.kc)(function(o){var a=o.token;return{action:{marginLeft:"8px",color:"rgba(0, 0, 0, 0.2)",fontSize:"24px",verticalAlign:"middle",cursor:"pointer",transition:"color 0.3s","&:hover":{color:a.colorPrimaryActive}},lang:{width:42,height:42,lineHeight:"42px",position:"fixed",right:16,borderRadius:a.borderRadius,":hover":{backgroundColor:a.colorBgTextHover}},container:{display:"flex",flexDirection:"column",height:"100vh",overflow:"auto",backgroundImage:"url('https://mdn.alipayobjects.com/yuyan_qk0oxh/afts/img/V-_oS6r-i7wAAAAAAAAAAAAAFl94AQBr')",backgroundSize:"100% 100%"}}}),je=function(a){var s=a.content;return(0,t.jsx)(pe.Z,{style:{marginBottom:24},message:s,type:"error",showIcon:!0})},Ze=function(){var a=(0,M.useModel)("@@initialState"),s=a.initialState,S=a.setInitialState,L=Se(),j=L.styles,g=(0,M.useIntl)(),U=function(){var F=I()(u()().mark(function f(){var i,m;return u()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,s==null||(i=s.fetchUserInfo)===null||i===void 0?void 0:i.call(s);case 2:m=p.sent,m&&(0,Pe.flushSync)(function(){S(function(T){return O()(O()({},T),{},{currentUser:m})})});case 4:case"end":return p.stop()}},f)}));return function(){return F.apply(this,arguments)}}(),w=function(){var F=I()(u()().mark(function f(i){var m,h,p,T;return u()().wrap(function(d){for(;;)switch(d.prev=d.next){case 0:return d.prev=0,d.next=3,(0,$.x4)(O()({},i));case 3:if(m=d.sent,!m.success){d.next=15;break}return h=g.formatMessage({id:"pages.login.success",defaultMessage:"\u767B\u5F55\u6210\u529F\uFF01"}),le.ZP.success(h),(0,Me.o4)(m.data),d.next=10,U();case 10:return p=new URL(window.location.href).searchParams,M.history.push(p.get("redirect")||"/"),d.abrupt("return");case 15:d.next=22;break;case 17:d.prev=17,d.t0=d.catch(0),T=g.formatMessage({id:"pages.login.failure",defaultMessage:"\u767B\u5F55\u5931\u8D25\uFF0C\u8BF7\u91CD\u8BD5\uFF01"}),console.log(d.t0),le.ZP.error(T);case 22:case"end":return d.stop()}},f,null,[[0,17]])}));return function(i){return F.apply(this,arguments)}}();return(0,t.jsxs)("div",{className:j.container,children:[(0,t.jsx)(M.Helmet,{children:(0,t.jsxs)("title",{children:[g.formatMessage({id:"menu.login",defaultMessage:"\u767B\u5F55\u9875"}),"- ",xe.Z.title]})}),(0,t.jsx)("div",{style:{flex:"1",padding:"32px 0"},children:(0,t.jsxs)(c,{contentStyle:{minWidth:280,maxWidth:"75vw"},logo:(0,t.jsx)("img",{alt:"logo",src:"/logo.png"}),title:"YOA",subTitle:g.formatMessage({id:"pages.layouts.userLayout.title"}),initialValues:{autoLogin:!0},actions:[],onFinish:function(){var F=I()(u()().mark(function f(i){return u()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,w(i);case 2:case"end":return h.stop()}},f)}));return function(f){return F.apply(this,arguments)}}(),children:[status==="error"&&(0,t.jsx)(je,{content:g.formatMessage({id:"pages.login.accountLogin.errorMessage",defaultMessage:"\u8D26\u6237\u6216\u5BC6\u7801\u9519\u8BEF"})}),(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(re.Z,{name:"userName",fieldProps:{size:"large",prefix:(0,t.jsx)(R.Z,{})},placeholder:g.formatMessage({id:"pages.login.username.placeholder",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D"}),rules:[{required:!0,message:(0,t.jsx)(M.FormattedMessage,{id:"pages.login.username.required",defaultMessage:"\u8BF7\u8F93\u5165\u7528\u6237\u540D!"})}]}),(0,t.jsx)(re.Z.Password,{name:"pwd",fieldProps:{size:"large",prefix:(0,t.jsx)(X,{})},placeholder:g.formatMessage({id:"pages.login.password.placeholder",defaultMessage:"\u5BC6\u7801: ant.design"}),rules:[{required:!0,message:(0,t.jsx)(M.FormattedMessage,{id:"pages.login.password.required",defaultMessage:"\u8BF7\u8F93\u5165\u5BC6\u7801\uFF01"})}]})]}),(0,t.jsxs)("div",{style:{marginBottom:24},children:[(0,t.jsx)(he,{noStyle:!0,name:"autoLogin",children:(0,t.jsx)(M.FormattedMessage,{id:"pages.login.rememberMe",defaultMessage:"\u81EA\u52A8\u767B\u5F55"})}),(0,t.jsx)("a",{style:{float:"right"},children:(0,t.jsx)(M.FormattedMessage,{id:"pages.login.forgotPassword",defaultMessage:"\u5FD8\u8BB0\u5BC6\u7801"})})]})]})}),(0,t.jsx)(G.$_,{})]})},Ce=Ze}}]);
