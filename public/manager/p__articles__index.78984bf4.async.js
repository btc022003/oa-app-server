"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[677],{23970:function(V,x,e){var R=e(48305),d=e.n(R),U=e(50959),l=e(69012),f=e(1442),p=e(66838),h=e(62698),a=e(11527),n=function(T){var s=T.imageUrl,y=T.setImageUrl,S=(0,U.useState)(!1),M=d()(S,2),v=M[0],L=M[1],G=function(O){if(O.file.status==="uploading"){L(!0);return}O.file.status==="done"&&(y(O.file.response.data),L(!1))},H=(0,a.jsxs)("div",{children:[v?(0,a.jsx)(l.Z,{}):(0,a.jsx)(f.Z,{}),(0,a.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,a.jsx)(a.Fragment,{children:(0,a.jsx)(p.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,headers:{token:(0,h.LP)()},action:h.P_,onChange:G,children:s?(0,a.jsx)("img",{src:(0,h.w0)(s),alt:"avatar",style:{width:"100%"}}):H})})};x.Z=n},57338:function(V,x,e){e.r(x),e.d(x,{default:function(){return ge}});var R=e(26068),d=e.n(R),U=e(90228),l=e.n(U),f=e(87999),p=e.n(f),h=e(48305),a=e.n(h),n=e(50959),F=e(54885),T=e(77097),s=e(56249),y=e(25283),S=e(1536),M=e(21720),v=e(24706),L=e(14123),G=e(95306),H=e(19991),J=e(14292),O=e(53739),K=e(55641),ae=e(23777),re=e(83011),ne=e(1442),Z=e(11805);function se(r){return b.apply(this,arguments)}function b(){return b=p()(l()().mark(function r(u){var c;return l()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,Z.request)("/api/v1/articles",{method:"GET",params:d()(d()({},u),{},{page:u.current,per:u.pageSize})});case 2:return c=o.sent,o.abrupt("return",{data:c.data.list,success:!0,total:c.data.total});case 4:case"end":return o.stop()}},r)})),b.apply(this,arguments)}function le(r){return(0,Z.request)("/api/v1/articles",{method:"POST",data:r})}function ue(r,u){return(0,Z.request)("/api/v1/articles/"+r,{method:"PATCH",data:u})}function oe(r){return(0,Z.request)("/api/v1/articles/"+r,{method:"DELETE"})}function ie(r){return(0,Z.request)("/api/v1/articles/remove_many",{method:"DELETE",params:{ids:r}})}var de=e(23970),je=e(61417),Q=e(45372),t=e(11527);function ce(r){var u=r.html,c=r.setHtml,g=(0,n.useState)(null),o=a()(g,2),E=o[0],_=o[1],I={},W={placeholder:"\u8BF7\u8F93\u5165\u5185\u5BB9..."};return(0,n.useEffect)(function(){return function(){E!=null&&(E.destroy(),_(null))}},[E]),(0,t.jsx)(t.Fragment,{children:(0,t.jsxs)("div",{style:{border:"1px solid #ccc",zIndex:100},children:[(0,t.jsx)(Q.o,{editor:E,defaultConfig:I,mode:"default",style:{borderBottom:"1px solid #ccc"}}),(0,t.jsx)(Q.M,{defaultConfig:W,value:u,onCreated:_,onChange:function(j){return c(j.getHtml())},mode:"default",style:{height:"500px",overflowY:"hidden"}})]})})}var me=ce,ve=e(44633);function fe(){var r=(0,n.useState)([]),u=a()(r,2),c=u[0],g=u[1],o=function(){var E=p()(l()().mark(function _(){var I;return l()().wrap(function(P){for(;;)switch(P.prev=P.next){case 0:return P.next=2,(0,ve.kD)({pageSize:100});case 2:I=P.sent,g(I.data.map(function(j){return{value:j.id,label:j.name}}));case 4:case"end":return P.stop()}},_)}));return function(){return E.apply(this,arguments)}}();return(0,n.useEffect)(function(){o()},[]),{articleCategories:c}}var pe=e(62698);function he(){var r=(0,n.useState)(!1),u=a()(r,2),c=u[0],g=u[1],o=(0,n.useState)(""),E=a()(o,2),_=E[0],I=E[1],W=(0,n.useState)(""),P=a()(W,2),j=P[0],Y=P[1],Ee=(0,n.useState)(""),X=a()(Ee,2),w=X[0],k=X[1],_e=(0,n.useState)([]),q=a()(_e,2),ee=q[0],te=q[1],$=(0,n.useRef)(),Pe=F.A.useForm(),Ce=a()(Pe,1),N=Ce[0],De=fe(),ye=De.articleCategories,Ie=[{title:"\u5E8F\u53F7",hideInSearch:!0,render:function(m,i,C){return C+1}},{title:"\u6807\u9898",dataIndex:"name",fieldProps:{name:"name"}},{title:"\u7B80\u4ECB",hideInSearch:!0,dataIndex:"desc"},{title:"\u6D4F\u89C8\u6B21\u6570",hideInSearch:!0,dataIndex:"views"},{title:"\u5C01\u9762",hideInSearch:!0,align:"center",render:function(m){return(0,t.jsx)(H.Z,{src:(0,pe.w0)(m.image),width:120})}},{title:"\u64CD\u4F5C",hideInSearch:!0,width:100,render:function(m,i){return(0,t.jsxs)(J.Z,{children:[(0,t.jsx)(O.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:p()(l()().mark(function C(){var D;return l()().wrap(function(z){for(;;)switch(z.prev=z.next){case 0:return z.next=2,oe(i.id);case 2:(D=$.current)===null||D===void 0||D.reload();case 3:case"end":return z.stop()}},C)})),children:(0,t.jsx)(K.ZP,{type:"primary",danger:!0,size:"small",icon:(0,t.jsx)(ae.Z,{})})}),(0,t.jsx)(K.ZP,{type:"primary",size:"small",icon:(0,t.jsx)(re.Z,{}),onClick:function(){N.setFieldsValue(i),k(i.id),g(!0),I(i.image),Y(i.content)}})]})}}];return(0,n.useEffect)(function(){c||(N.resetFields(),k(""),te([]),I(""),Y(""))},[c]),(0,t.jsxs)(T._z,{children:[(0,t.jsx)(s.Z,{bordered:!0,size:"small",columns:Ie,request:se,actionRef:$,tableAlertRender:!1,toolBarRender:function(){return[(0,t.jsx)(K.ZP,{icon:(0,t.jsx)(ne.Z,{}),onClick:function(){return g(!0)}},1),(0,t.jsx)(O.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:p()(l()().mark(function m(){var i;return l()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,ie(ee.join(","));case 2:(i=$.current)===null||i===void 0||i.reload();case 3:case"end":return D.stop()}},m)})),children:(0,t.jsx)(K.ZP,{type:"primary",danger:!0,style:{display:ee.length>0?"":"none"},children:"\u6279\u91CF\u5220\u9664"})},2)]},rowKey:"id",rowSelection:{onChange:function(m){te(m)}}}),(0,t.jsxs)(y.Y,{form:N,open:c,onOpenChange:g,title:"\u7F16\u8F91",onFinish:function(){var B=p()(l()().mark(function m(i){var C;return l()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:if(!w){A.next=5;break}return A.next=3,ue(w,d()(d()({},i),{},{image:_,content:j}));case 3:A.next=7;break;case 5:return A.next=7,le(d()(d()({},i),{},{image:_,content:j}));case 7:g(!1),(C=$.current)===null||C===void 0||C.reload();case 9:case"end":return A.stop()}},m)}));return function(m){return B.apply(this,arguments)}}(),children:[(0,t.jsx)(S.Z,{label:"\u6807\u9898",name:"name",rules:[{required:!0,message:"\u6807\u9898\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,t.jsx)(M.Z,{label:"\u4E3B\u56FE",children:(0,t.jsx)(de.Z,{imageUrl:_,setImageUrl:I})}),(0,t.jsx)(v.Z,{label:"\u5206\u7C7B",options:ye,name:"articleCategoryId"}),(0,t.jsx)(L.Z,{label:"\u7B80\u4ECB",name:"desc",rules:[{required:!0,message:"\u7B80\u4ECB\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,t.jsx)(G.Z,{label:"\u6D4F\u89C8\u6B21\u6570",name:"views",min:1,rules:[{required:!0,message:"\u6D4F\u89C8\u6B21\u6570"}]}),(0,t.jsx)(M.Z,{label:"\u8BE6\u60C5",children:(0,t.jsx)(me,{html:j,setHtml:Y})})]})]})}var ge=he},44633:function(V,x,e){e.d(x,{EA:function(){return a},G_:function(){return n},Ln:function(){return T},aR:function(){return F},kD:function(){return p}});var R=e(90228),d=e.n(R),U=e(87999),l=e.n(U),f=e(11805);function p(s){return h.apply(this,arguments)}function h(){return h=l()(d()().mark(function s(y){var S;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,f.request)("/api/v1/article_categories",{method:"GET",params:{page:y.current,per:y.pageSize}});case 2:return S=v.sent,v.abrupt("return",{data:S.data.list,success:!0,total:S.data.total});case 4:case"end":return v.stop()}},s)})),h.apply(this,arguments)}function a(s){return(0,f.request)("/api/v1/article_categories",{method:"POST",data:s})}function n(s,y){return(0,f.request)("/api/v1/article_categories/"+s,{method:"PATCH",data:y})}function F(s){return(0,f.request)("/api/v1/article_categories/"+s,{method:"DELETE"})}function T(s){return(0,f.request)("/api/v1/article_categories/remove_many",{method:"DELETE",params:{ids:s}})}}}]);
