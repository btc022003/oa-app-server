"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[690],{41746:function(Q,B,e){e.d(B,{R:function(){return A},d:function(){return E}});var O=e(90228),d=e.n(O),M=e(87999),R=e.n(M),s=e(48305),u=e.n(s),c=e(50959),g=e(11805);function F(o){return h.apply(this,arguments)}function h(){return h=R()(d()().mark(function o(y){var C;return d()().wrap(function(v){for(;;)switch(v.prev=v.next){case 0:return v.next=2,(0,g.request)("/api/v1/roles",{method:"GET",params:{page:y.current,per:y.pageSize}});case 2:return C=v.sent,v.abrupt("return",{data:C.data.list,success:!0,total:C.data.total});case 4:case"end":return v.stop()}},o)})),h.apply(this,arguments)}function D(o){return request("/api/v1/roles",{method:"POST",data:o})}function i(o,y){return request("/api/v1/roles/"+o,{method:"PATCH",data:y})}function t(o){return request("/api/v1/roles/"+o,{method:"DELETE"})}function P(o){return request("/api/v1/roles/remove_many",{method:"DELETE",params:{ids:o}})}var L=e(23306);function E(){var o=(0,c.useState)([]),y=u()(o,2),C=y[0],x=y[1],v=function(){var $=R()(d()().mark(function Z(){var G;return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,F({pageSize:100});case 2:G=p.sent,x(G.data.map(function(T){return{value:T.id,label:T.name}}));case 4:case"end":return p.stop()}},Z)}));return function(){return $.apply(this,arguments)}}();return(0,c.useEffect)(function(){v()},[]),{roles:C}}function A(){var o=(0,c.useState)([]),y=u()(o,2),C=y[0],x=y[1],v=function(){var $=R()(d()().mark(function Z(){var G;return d()().wrap(function(p){for(;;)switch(p.prev=p.next){case 0:return p.next=2,(0,L.LL)();case 2:G=p.sent,x(G.data.map(function(T){return{value:T.id,label:T.realName}}));case 4:case"end":return p.stop()}},Z)}));return function(){return $.apply(this,arguments)}}();return(0,c.useEffect)(function(){v()},[]),{leaveCheckers:C}}},29852:function(Q,B,e){e.r(B),e.d(B,{default:function(){return de}});var O=e(26068),d=e.n(O),M=e(67825),R=e.n(M),s=e(90228),u=e.n(s),c=e(87999),g=e.n(c),F=e(48305),h=e.n(F),D=e(50959),i=e(54885),t=e(77097),P=e(56249),L=e(25283),E=e(24706),A=e(6997),o=e(95306),y=e(14123),C=e(14292),x=e(99082),v=e(53739),$=e(55641),Z=e(84740),G=e(55210),V=e(23777),p=e(1442),T=e(11805);function ee(m){return X.apply(this,arguments)}function X(){return X=g()(u()().mark(function m(_){var j;return u()().wrap(function(S){for(;;)switch(S.prev=S.next){case 0:return S.next=2,(0,T.request)("/api/v1/leaves",{method:"GET",params:{page:_.current,per:_.pageSize}});case 2:return j=S.sent,S.abrupt("return",{data:j.data.list,success:!0,total:j.data.total});case 4:case"end":return S.stop()}},m)})),X.apply(this,arguments)}function ae(m){return(0,T.request)("/api/v1/leaves/user/leave",{method:"POST",data:m})}function fe(m,_){return request("/api/v1/leaves/"+m,{method:"PATCH",data:_})}function re(m){return(0,T.request)("/api/v1/leaves/"+m,{method:"DELETE"})}function ne(m){return(0,T.request)("/api/v1/leaves/remove_many",{method:"DELETE",params:{ids:m}})}var w=e(62698),te=e(18710);function ue(){var m=(0,D.useState)([]),_=h()(m,2),j=_[0],U=_[1],S=function(){var N=g()(u()().mark(function z(){var b;return u()().wrap(function(K){for(;;)switch(K.prev=K.next){case 0:return K.next=2,(0,te.kD)({pageSize:100});case 2:b=K.sent,U(b.data.map(function(Y){return{value:Y.id,label:Y.name}}));case 4:case"end":return K.stop()}},z)}));return function(){return N.apply(this,arguments)}}();return(0,D.useEffect)(function(){S()},[]),{leaveCategories:j}}var se=e(41746),n=e(11527),oe=["timeRange","checkers"];function le(){var m=(0,D.useState)(!1),_=h()(m,2),j=_[0],U=_[1],S=(0,D.useState)([]),N=h()(S,2),z=N[0],b=N[1],H=(0,D.useRef)(),K=i.A.useForm(),Y=h()(K,1),q=Y[0],ie=ue(),ce=ie.leaveCategories,me=(0,se.R)(),ve=me.leaveCheckers,pe=[{title:"\u5E8F\u53F7",hideInSearch:!0,render:function(r,a,f){return f+1}},{title:"\u7528\u6237\u540D",hideInSearch:!0,render:function(r){var a;return(a=r.employee)===null||a===void 0?void 0:a.userName}},{title:"\u540D\u5B57",hideInSearch:!0,render:function(r){var a;return(a=r.employee)===null||a===void 0?void 0:a.realName}},{title:"\u90E8\u95E8",hideInSearch:!0,render:function(r){var a;return(a=r.employee)===null||a===void 0||(a=a.department)===null||a===void 0?void 0:a.name}},{title:"\u65F6\u95F4",hideInSearch:!0,render:function(r){return"".concat((0,w.o0)(r.startTime),"\u81F3").concat((0,w.o0)(r.endTime))}},{title:"\u8BF7\u5047\u7C7B\u578B",hideInSearch:!0,align:"center",render:function(r){return r.leaveCategory.name}},{title:"\u5907\u6CE8",hideInSearch:!0,dataIndex:"desc"},{title:"\u5BA1\u6838\u72B6\u6001",hideInSearch:!0,render:function(r){var a;return(0,n.jsx)(C.Z,{children:(a=r.leaveCheckLogs)===null||a===void 0?void 0:a.map(function(f){var l;return(0,n.jsxs)(x.Z,{color:f.isCheck?"success":"error",children:[(l=f.owner)===null||l===void 0?void 0:l.realName,f.isCheck?(0,n.jsx)(Z.Z,{}):(0,n.jsx)(G.Z,{})]},f.id)})})}},{title:"\u64CD\u4F5C",hideInSearch:!0,render:function(r,a){return(0,n.jsx)(C.Z,{children:(0,n.jsx)(v.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:g()(u()().mark(function f(){var l;return u()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:return W.next=2,re(a.id);case 2:(l=H.current)===null||l===void 0||l.reload();case 3:case"end":return W.stop()}},f)})),children:(0,n.jsx)($.ZP,{type:"primary",danger:!0,size:"small",icon:(0,n.jsx)(V.Z,{})})})})}}];return(0,D.useEffect)(function(){j||(q.resetFields(),b([]))},[j]),(0,n.jsxs)(t._z,{children:[(0,n.jsx)(P.Z,{search:!1,bordered:!0,size:"small",columns:pe,request:ee,actionRef:H,tableAlertRender:!1,toolBarRender:function(){return[(0,n.jsx)($.ZP,{icon:(0,n.jsx)(p.Z,{}),onClick:function(){return U(!0)}},1),(0,n.jsx)(v.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:g()(u()().mark(function r(){var a;return u()().wrap(function(l){for(;;)switch(l.prev=l.next){case 0:return l.next=2,ne(z.join(","));case 2:(a=H.current)===null||a===void 0||a.reload();case 3:case"end":return l.stop()}},r)})),children:(0,n.jsx)($.ZP,{type:"primary",danger:!0,style:{display:z.length>0?"":"none"},children:"\u6279\u91CF\u5220\u9664"})},2)]},rowKey:"id",rowSelection:{onChange:function(r){b(r)}}}),(0,n.jsxs)(L.Y,{form:q,open:j,onOpenChange:U,title:"\u7F16\u8F91",onFinish:function(){var I=g()(u()().mark(function r(a){var f,l,k,W;return u()().wrap(function(J){for(;;)switch(J.prev=J.next){case 0:return l=a.timeRange,k=a.checkers,W=R()(a,oe),J.next=3,ae(d()(d()({},W),{},{startTime:l[0],endTime:l[1],checkers:k.join(",")}));case 3:U(!1),(f=H.current)===null||f===void 0||f.reload();case 5:case"end":return J.stop()}},r)}));return function(r){return I.apply(this,arguments)}}(),children:[(0,n.jsx)(E.Z,{label:"\u8BF7\u5047\u7C7B\u578B",options:ce,rules:[{required:!0,message:"\u8BF7\u5047\u7C7B\u578B\u4E0D\u80FD\u4E3A\u7A7A"}],name:"leaveCategoryId"}),(0,n.jsx)(E.Z,{mode:"multiple",label:"\u5BA1\u6279\u4EBA",name:"checkers",rules:[{required:!0,message:"\u5BA1\u6279\u4EBA\u4E0D\u80FD\u4E3A\u7A7A"}],options:ve}),(0,n.jsx)(A.Z,{label:"\u8D77\u59CB\u65F6\u95F4",name:"timeRange",rules:[{required:!0,message:"\u8D77\u59CB\u65F6\u95F4\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,n.jsx)(o.Z,{label:"\u65F6\u957F",placeholder:"\u4E00\u5929\u6309\u516B\u5C0F\u65F6\u8BA1\u7B97",name:"durations",rules:[{required:!0,message:"\u65F6\u957F\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,n.jsx)(y.Z,{label:"\u5907\u6CE8",name:"desc"})]})]})}var de=le},23306:function(Q,B,e){e.d(B,{EA:function(){return g},G_:function(){return h},LL:function(){return F},Ln:function(){return i},aR:function(){return D},kD:function(){return u}});var O=e(90228),d=e.n(O),M=e(87999),R=e.n(M),s=e(11805);function u(t){return c.apply(this,arguments)}function c(){return c=R()(d()().mark(function t(P){var L;return d()().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,(0,s.request)("/api/v1/employees",{method:"GET",params:{page:P.current,per:P.pageSize}});case 2:return L=A.sent,A.abrupt("return",{data:L.data.list,success:!0,total:L.data.total});case 4:case"end":return A.stop()}},t)})),c.apply(this,arguments)}function g(t){return(0,s.request)("/api/v1/employees",{method:"POST",data:t})}function F(){return(0,s.request)("/api/v1/employees/user/leave_checkers",{method:"GET"})}function h(t,P){return(0,s.request)("/api/v1/employees/"+t,{method:"PATCH",data:P})}function D(t){return(0,s.request)("/api/v1/employees/"+t,{method:"DELETE"})}function i(t){return(0,s.request)("/api/v1/employees/remove_many",{method:"DELETE",params:{ids:t}})}},18710:function(Q,B,e){e.d(B,{EA:function(){return g},G_:function(){return F},Ln:function(){return D},aR:function(){return h},kD:function(){return u}});var O=e(90228),d=e.n(O),M=e(87999),R=e.n(M),s=e(11805);function u(i){return c.apply(this,arguments)}function c(){return c=R()(d()().mark(function i(t){var P;return d()().wrap(function(E){for(;;)switch(E.prev=E.next){case 0:return E.next=2,(0,s.request)("/api/v1/leave_categories",{method:"GET",params:{page:t.current,per:t.pageSize}});case 2:return P=E.sent,E.abrupt("return",{data:P.data.list,success:!0,total:P.data.total});case 4:case"end":return E.stop()}},i)})),c.apply(this,arguments)}function g(i){return(0,s.request)("/api/v1/leave_categories",{method:"POST",data:i})}function F(i,t){return(0,s.request)("/api/v1/leave_categories/"+i,{method:"PATCH",data:t})}function h(i){return(0,s.request)("/api/v1/leave_categories/"+i,{method:"DELETE"})}function D(i){return(0,s.request)("/api/v1/leave_categories/remove_many",{method:"DELETE",params:{ids:i}})}}}]);
