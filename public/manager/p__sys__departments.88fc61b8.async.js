"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[317],{23777:function(b,P,e){var d=e(28730),n=e(50959),v=e(1688),u=e(69164),o=function(E,p){return n.createElement(u.Z,(0,d.Z)((0,d.Z)({},E),{},{ref:p,icon:v.Z}))};o.displayName="DeleteOutlined",P.Z=n.forwardRef(o)},83011:function(b,P,e){var d=e(28730),n=e(50959),v=e(8941),u=e(69164),o=function(E,p){return n.createElement(u.Z,(0,d.Z)((0,d.Z)({},E),{},{ref:p,icon:v.Z}))};o.displayName="EditOutlined",P.Z=n.forwardRef(o)},1442:function(b,P,e){var d=e(28730),n=e(50959),v=e(63374),u=e(69164),o=function(E,p){return n.createElement(u.Z,(0,d.Z)((0,d.Z)({},E),{},{ref:p,icon:v.Z}))};o.displayName="PlusOutlined",P.Z=n.forwardRef(o)},1536:function(b,P,e){var d=e(18534),n=e(28730),v=e(57596),u=e(65589),o=e(28955),T=e(42402),E=e(71770),p=e(50959),c=e(53208),m=e(11527),K=["fieldProps","proFieldProps"],U=["fieldProps","proFieldProps"],f="text",r=function(t){var _=t.fieldProps,A=t.proFieldProps,s=(0,v.Z)(t,K);return(0,m.jsx)(c.Z,(0,n.Z)({valueType:f,fieldProps:_,filedConfig:{valueType:f},proFieldProps:A},s))},O=function(t){var _=(0,u.Z)(t.open||!1,{value:t.open,onChange:t.onOpenChange}),A=(0,d.Z)(_,2),s=A[0],y=A[1];return(0,m.jsx)(o.Z.Item,{shouldUpdate:!0,noStyle:!0,children:function(Z){var I,g=Z.getFieldValue(t.name||[]);return(0,m.jsx)(T.Z,(0,n.Z)((0,n.Z)({getPopupContainer:function(i){return i&&i.parentNode?i.parentNode:i},onOpenChange:y,content:(0,m.jsxs)("div",{style:{padding:"4px 0"},children:[(I=t.statusRender)===null||I===void 0?void 0:I.call(t,g),t.strengthText?(0,m.jsx)("div",{style:{marginTop:10},children:(0,m.jsx)("span",{children:t.strengthText})}):null]}),overlayStyle:{width:240},placement:"right"},t.popoverProps),{},{open:s,children:t.children}))}})},a=function(t){var _=t.fieldProps,A=t.proFieldProps,s=(0,v.Z)(t,U),y=(0,p.useState)(!1),l=(0,d.Z)(y,2),Z=l[0],I=l[1];return _!=null&&_.statusRender&&s.name?(0,m.jsx)(O,{name:s.name,statusRender:_==null?void 0:_.statusRender,popoverProps:_==null?void 0:_.popoverProps,strengthText:_==null?void 0:_.strengthText,open:Z,onOpenChange:I,children:(0,m.jsx)(c.Z,(0,n.Z)({valueType:"password",fieldProps:(0,n.Z)((0,n.Z)({},(0,E.Z)(_,["statusRender","popoverProps","strengthText"])),{},{onBlur:function(L){var i;_==null||(i=_.onBlur)===null||i===void 0||i.call(_,L),I(!1)},onClick:function(L){var i;_==null||(i=_.onClick)===null||i===void 0||i.call(_,L),I(!0)}}),proFieldProps:A,filedConfig:{valueType:f}},s))}):(0,m.jsx)(c.Z,(0,n.Z)({valueType:"password",fieldProps:_,proFieldProps:A,filedConfig:{valueType:f}},s))},M=r;M.Password=a,M.displayName="ProFormComponent",P.Z=M},96991:function(b,P,e){e.d(P,{V:function(){return U}});var d=e(90228),n=e.n(d),v=e(87999),u=e.n(v),o=e(48305),T=e.n(o),E=e(26068),p=e.n(E),c=e(50959),m=e(60556);function K(f){var r={},O=[];return f.forEach(function(a){r[a.id]=p()(p()({},a),{},{children:[]})}),f.forEach(function(a){var M=a.parent?r[a.parent.id]:null;M?M.children.push({value:a.id,title:a.name,children:r[a.id].children}):O.push({value:r[a.id].id,title:r[a.id].name,children:r[a.id].children})}),O}function U(){var f=(0,c.useState)([]),r=T()(f,2),O=r[0],a=r[1],M=function(){var h=u()(n()().mark(function t(){var _;return n()().wrap(function(s){for(;;)switch(s.prev=s.next){case 0:return s.next=2,(0,m.vO)();case 2:_=s.sent,a(K(_.data.list));case 4:case"end":return s.stop()}},t)}));return function(){return h.apply(this,arguments)}}();return{loadDataDepartmentsAPI:M,allDepartmentsData:O}}},41971:function(b,P,e){e.r(P);var d=e(26068),n=e.n(d),v=e(90228),u=e.n(v),o=e(87999),T=e.n(o),E=e(48305),p=e.n(E),c=e(50959),m=e(54885),K=e(77097),U=e(56249),f=e(25283),r=e(1536),O=e(14292),a=e(53739),M=e(55641),h=e(68380),t=e(23777),_=e(83011),A=e(1442),s=e(60556),y=e(96991),l=e(11527);function Z(){var I=(0,c.useState)(!1),g=p()(I,2),L=g[0],i=g[1],Y=(0,c.useState)(""),$=p()(Y,2),G=$[0],w=$[1],J=(0,c.useState)([]),N=p()(J,2),z=N[0],V=N[1],S=(0,c.useRef)(),Q=m.A.useForm(),X=p()(Q,1),F=X[0],H=(0,y.V)(),k=H.loadDataDepartmentsAPI,q=H.allDepartmentsData,ee=[{title:"\u5E8F\u53F7",hideInSearch:!0,render:function(C,D,R){return R+1}},{title:"\u540D\u5B57",hideInSearch:!0,dataIndex:"name",fieldProps:{name:"name"}},{title:"\u4E0A\u4E00\u7EA7",hideInSearch:!0,render:function(C){var D;return(D=C.parent)===null||D===void 0?void 0:D.name}},{title:"\u64CD\u4F5C",hideInSearch:!0,width:100,render:function(C,D){return(0,l.jsxs)(O.Z,{children:[(0,l.jsx)(a.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:T()(u()().mark(function R(){var B;return u()().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,(0,s.aR)(D.id);case 2:(B=S.current)===null||B===void 0||B.reload();case 3:case"end":return x.stop()}},R)})),children:(0,l.jsx)(M.ZP,{type:"primary",danger:!0,size:"small",icon:(0,l.jsx)(t.Z,{})})}),(0,l.jsx)(M.ZP,{type:"primary",size:"small",icon:(0,l.jsx)(_.Z,{}),onClick:function(){F.setFieldsValue(D),w(D.id),i(!0)}})]})}}];return(0,c.useEffect)(function(){L||(F.resetFields(),w(""),V([]),k())},[L]),(0,l.jsxs)(K._z,{children:[(0,l.jsx)(U.Z,{bordered:!0,size:"small",columns:ee,request:s.kD,actionRef:S,tableAlertRender:!1,toolBarRender:function(){return[(0,l.jsx)(M.ZP,{icon:(0,l.jsx)(A.Z,{}),onClick:function(){return i(!0)}},1),(0,l.jsx)(a.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:T()(u()().mark(function C(){var D;return u()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,s.Ln)(z.join(","));case 2:(D=S.current)===null||D===void 0||D.reload();case 3:case"end":return B.stop()}},C)})),children:(0,l.jsx)(M.ZP,{type:"primary",danger:!0,style:{display:z.length>0?"":"none"},children:"\u6279\u91CF\u5220\u9664"})},2)]},rowKey:"id",rowSelection:{onChange:function(C){V(C)}}}),(0,l.jsxs)(f.Y,{form:F,open:L,onOpenChange:i,title:"\u7F16\u8F91",onFinish:function(){var j=T()(u()().mark(function C(D){var R;return u()().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:if(!G){W.next=5;break}return W.next=3,(0,s.G_)(G,n()({},D));case 3:W.next=7;break;case 5:return W.next=7,(0,s.EA)(n()({},D));case 7:i(!1),(R=S.current)===null||R===void 0||R.reload();case 9:case"end":return W.stop()}},C)}));return function(C){return j.apply(this,arguments)}}(),children:[(0,l.jsx)(r.Z,{label:"\u540D\u5B57",name:"name",rules:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,l.jsx)(m.A.Item,{label:"\u90E8\u95E8",name:"departmentId",children:(0,l.jsx)(h.Z,{showSearch:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Please select",allowClear:!0,treeDefaultExpandAll:!0,treeData:q})})]})]})}P.default=Z},60556:function(b,P,e){e.d(P,{EA:function(){return m},G_:function(){return K},Ln:function(){return f},aR:function(){return U},kD:function(){return T},vO:function(){return p}});var d=e(90228),n=e.n(d),v=e(87999),u=e.n(v),o=e(11805);function T(r){return E.apply(this,arguments)}function E(){return E=u()(n()().mark(function r(O){var a;return n()().wrap(function(h){for(;;)switch(h.prev=h.next){case 0:return h.next=2,(0,o.request)("/api/v1/departments",{method:"GET",params:{page:O.current,per:O.pageSize}});case 2:return a=h.sent,h.abrupt("return",{data:a.data.list,success:!0,total:a.data.total});case 4:case"end":return h.stop()}},r)})),E.apply(this,arguments)}function p(){return c.apply(this,arguments)}function c(){return c=u()(n()().mark(function r(){return n()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,o.request)("/api/v1/departments",{method:"GET",params:{per:100}}));case 1:case"end":return a.stop()}},r)})),c.apply(this,arguments)}function m(r){return(0,o.request)("/api/v1/departments",{method:"POST",data:r})}function K(r,O){return(0,o.request)("/api/v1/departments/"+r,{method:"PATCH",data:O})}function U(r){return(0,o.request)("/api/v1/departments/"+r,{method:"DELETE"})}function f(r){return(0,o.request)("/api/v1/departments/remove_many",{method:"DELETE",params:{ids:r}})}}}]);
