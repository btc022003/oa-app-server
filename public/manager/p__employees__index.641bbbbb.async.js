"use strict";(self.webpackChunkant_design_pro=self.webpackChunkant_design_pro||[]).push([[494],{24706:function(x,M,e){var h=e(28730),s=e(57596),A=e(1253),d=e(50959),p=e(29984),P=e(53208),_=e(11527),l=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","showSearch","options"],m=["fieldProps","children","params","proFieldProps","mode","valueEnum","request","options"],y=function(a,u){var o=a.fieldProps,v=a.children,E=a.params,T=a.proFieldProps,c=a.mode,t=a.valueEnum,j=a.request,S=a.showSearch,b=a.options,D=(0,s.Z)(a,l),O=(0,d.useContext)(p.Z);return(0,_.jsx)(P.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,A.h)(t),request:j,params:E,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({options:b,mode:c,showSearch:S,getPopupContainer:O.getPopupContainer},o),ref:u,proFieldProps:T},D),{},{children:v}))},g=d.forwardRef(function(n,a){var u=n.fieldProps,o=n.children,v=n.params,E=n.proFieldProps,T=n.mode,c=n.valueEnum,t=n.request,j=n.options,S=(0,s.Z)(n,m),b=(0,h.Z)({options:j,mode:T||"multiple",labelInValue:!0,showSearch:!0,suffixIcon:null,autoClearSearchValue:!0,optionLabelProp:"label"},u),D=(0,d.useContext)(p.Z);return(0,_.jsx)(P.Z,(0,h.Z)((0,h.Z)({valueEnum:(0,A.h)(c),request:t,params:v,valueType:"select",filedConfig:{customLightMode:!0},fieldProps:(0,h.Z)({getPopupContainer:D.getPopupContainer},b),ref:a,proFieldProps:E},S),{},{children:o}))}),C=d.forwardRef(y),i=g,r=C;r.SearchSelect=i,r.displayName="ProFormComponent",M.Z=r},23970:function(x,M,e){var h=e(48305),s=e.n(h),A=e(50959),d=e(69012),p=e(1442),P=e(66838),_=e(62698),l=e(11527),m=function(g){var C=g.imageUrl,i=g.setImageUrl,r=(0,A.useState)(!1),n=s()(r,2),a=n[0],u=n[1],o=function(T){if(T.file.status==="uploading"){u(!0);return}T.file.status==="done"&&(i(T.file.response.data),u(!1))},v=(0,l.jsxs)("div",{children:[a?(0,l.jsx)(d.Z,{}):(0,l.jsx)(p.Z,{}),(0,l.jsx)("div",{style:{marginTop:8},children:"Upload"})]});return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)(P.Z,{name:"file",listType:"picture-card",className:"avatar-uploader",showUploadList:!1,headers:{token:(0,_.LP)()},action:_.P_,onChange:o,children:C?(0,l.jsx)("img",{src:(0,_.w0)(C),alt:"avatar",style:{width:"100%"}}):v})})};M.Z=m},96991:function(x,M,e){e.d(M,{V:function(){return C}});var h=e(90228),s=e.n(h),A=e(87999),d=e.n(A),p=e(48305),P=e.n(p),_=e(26068),l=e.n(_),m=e(50959),y=e(60556);function g(i){var r={},n=[];return i.forEach(function(a){r[a.id]=l()(l()({},a),{},{children:[]})}),i.forEach(function(a){var u=a.parent?r[a.parent.id]:null;u?u.children.push({value:a.id,title:a.name,children:r[a.id].children}):n.push({value:r[a.id].id,title:r[a.id].name,children:r[a.id].children})}),n}function C(){var i=(0,m.useState)([]),r=P()(i,2),n=r[0],a=r[1],u=function(){var o=d()(s()().mark(function v(){var E;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,y.vO)();case 2:E=c.sent,a(g(E.data.list));case 4:case"end":return c.stop()}},v)}));return function(){return o.apply(this,arguments)}}();return{loadDataDepartmentsAPI:u,allDepartmentsData:n}}},41746:function(x,M,e){e.d(M,{R:function(){return u},d:function(){return a}});var h=e(90228),s=e.n(h),A=e(87999),d=e.n(A),p=e(48305),P=e.n(p),_=e(50959),l=e(11805);function m(o){return y.apply(this,arguments)}function y(){return y=d()(s()().mark(function o(v){var E;return s()().wrap(function(c){for(;;)switch(c.prev=c.next){case 0:return c.next=2,(0,l.request)("/api/v1/roles",{method:"GET",params:{page:v.current,per:v.pageSize}});case 2:return E=c.sent,c.abrupt("return",{data:E.data.list,success:!0,total:E.data.total});case 4:case"end":return c.stop()}},o)})),y.apply(this,arguments)}function g(o){return request("/api/v1/roles",{method:"POST",data:o})}function C(o,v){return request("/api/v1/roles/"+o,{method:"PATCH",data:v})}function i(o){return request("/api/v1/roles/"+o,{method:"DELETE"})}function r(o){return request("/api/v1/roles/remove_many",{method:"DELETE",params:{ids:o}})}var n=e(23306);function a(){var o=(0,_.useState)([]),v=P()(o,2),E=v[0],T=v[1],c=function(){var t=d()(s()().mark(function j(){var S;return s()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,m({pageSize:100});case 2:S=D.sent,T(S.data.map(function(O){return{value:O.id,label:O.name}}));case 4:case"end":return D.stop()}},j)}));return function(){return t.apply(this,arguments)}}();return(0,_.useEffect)(function(){c()},[]),{roles:E}}function u(){var o=(0,_.useState)([]),v=P()(o,2),E=v[0],T=v[1],c=function(){var t=d()(s()().mark(function j(){var S;return s()().wrap(function(D){for(;;)switch(D.prev=D.next){case 0:return D.next=2,(0,n.LL)();case 2:S=D.sent,T(S.data.map(function(O){return{value:O.id,label:O.realName}}));case 4:case"end":return D.stop()}},j)}));return function(){return t.apply(this,arguments)}}();return(0,_.useEffect)(function(){c()},[]),{leaveCheckers:E}}},15686:function(x,M,e){e.r(M),e.d(M,{default:function(){return he}});var h=e(26068),s=e.n(h),A=e(90228),d=e.n(A),p=e(87999),P=e.n(p),_=e(48305),l=e.n(_),m=e(50959),y=e(54885),g=e(77097),C=e(56249),i=e(25283),r=e(1536),n=e(21720),a=e(24706),u=e(28730),o=e(57596),v=e(1253),E=e(83713),T=e(57572),c=e(53208),t=e(11527),j=["fieldProps","options","radioType","layout","proFieldProps","valueEnum"],S=m.forwardRef(function(R,K){var W=R.fieldProps,F=R.options,Y=R.radioType,V=R.layout,$=R.proFieldProps,N=R.valueEnum,J=(0,o.Z)(R,j);return(0,t.jsx)(c.Z,(0,u.Z)((0,u.Z)({valueType:Y==="button"?"radioButton":"radio",ref:K,valueEnum:(0,v.h)(N,void 0)},J),{},{fieldProps:(0,u.Z)({options:F,layout:V},W),proFieldProps:$,filedConfig:{customLightMode:!0}}))}),b=m.forwardRef(function(R,K){var W=R.fieldProps,F=R.children;return(0,t.jsx)(E.ZP,(0,u.Z)((0,u.Z)({},W),{},{ref:K,children:F}))}),D=(0,T.G)(b,{valuePropName:"checked",ignoreWidth:!0}),O=D;O.Group=S,O.Button=E.ZP.Button,O.displayName="ProFormComponent";var oe=O,se=e(19991),ue=e(14292),X=e(53739),z=e(55641),le=e(68380),de=e(23777),pe=e(83011),ie=e(1442),G=e(23306),_e=e(62698),me=e(23970),ce=e(41746),ve=e(96991);function fe(){var R=(0,m.useState)(!1),K=l()(R,2),W=K[0],F=K[1],Y=(0,m.useState)(""),V=l()(Y,2),$=V[0],N=V[1],J=(0,m.useState)(""),k=l()(J,2),q=k[0],ee=k[1],Ee=(0,m.useState)([]),ae=l()(Ee,2),re=ae[0],te=ae[1],H=(0,m.useRef)(),Pe=y.A.useForm(),De=l()(Pe,1),Q=De[0],Ie=(0,ce.d)(),ye=Ie.roles,ne=(0,ve.V)(),Te=ne.allDepartmentsData,Me=ne.loadDataDepartmentsAPI;(0,m.useEffect)(function(){Me()},[]);var Ae=[{title:"\u5E8F\u53F7",hideInSearch:!0,render:function(I,f,L){return L+1}},{title:"\u7528\u6237\u540D",hideInSearch:!0,dataIndex:"userName"},{title:"\u540D\u5B57",dataIndex:"realName",fieldProps:{name:"name"}},{title:"\u6635\u79F0",hideInSearch:!0,dataIndex:"nickName"},{title:"\u5934\u50CF",hideInSearch:!0,align:"center",render:function(I){return(0,t.jsx)(se.Z,{src:(0,_e.w0)(I.avatar),width:120})}},{title:"\u89D2\u8272",hideInSearch:!0,render:function(I){var f;return(f=I.role)===null||f===void 0?void 0:f.name}},{title:"\u90E8\u95E8",hideInSearch:!0,render:function(I){var f;return I.department?((f=I.department)===null||f===void 0?void 0:f.name)+(I.isManager?"\u3010\u4E3B\u7BA1\u3011":""):""}},{title:"\u64CD\u4F5C",hideInSearch:!0,render:function(I,f){return(0,t.jsxs)(ue.Z,{children:[(0,t.jsx)(X.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:P()(d()().mark(function L(){var B;return d()().wrap(function(w){for(;;)switch(w.prev=w.next){case 0:return w.next=2,(0,G.aR)(f.id);case 2:(B=H.current)===null||B===void 0||B.reload();case 3:case"end":return w.stop()}},L)})),children:(0,t.jsx)(z.ZP,{type:"primary",danger:!0,size:"small",icon:(0,t.jsx)(de.Z,{})})}),(0,t.jsx)(z.ZP,{type:"primary",size:"small",icon:(0,t.jsx)(pe.Z,{}),onClick:function(){N(f.avatar),Q.setFieldsValue(f),ee(f.id),F(!0)}})]})}}];return(0,m.useEffect)(function(){W||(Q.resetFields(),N(""),ee(""),te([]))},[W]),(0,t.jsxs)(g._z,{children:[(0,t.jsx)(C.Z,{bordered:!0,size:"small",columns:Ae,request:G.kD,actionRef:H,tableAlertRender:!1,toolBarRender:function(){return[(0,t.jsx)(z.ZP,{icon:(0,t.jsx)(ie.Z,{}),onClick:function(){return F(!0)}},1),(0,t.jsx)(X.Z,{title:"\u662F\u5426\u786E\u8BA4\u5220\u9664?",onConfirm:P()(d()().mark(function I(){var f;return d()().wrap(function(B){for(;;)switch(B.prev=B.next){case 0:return B.next=2,(0,G.Ln)(re.join(","));case 2:(f=H.current)===null||f===void 0||f.reload();case 3:case"end":return B.stop()}},I)})),children:(0,t.jsx)(z.ZP,{type:"primary",danger:!0,style:{display:re.length>0?"":"none"},children:"\u6279\u91CF\u5220\u9664"})},2)]},rowKey:"id",rowSelection:{onChange:function(I){te(I)}}}),(0,t.jsxs)(i.Y,{form:Q,open:W,onOpenChange:F,title:"\u7F16\u8F91",onFinish:function(){var U=P()(d()().mark(function I(f){var L;return d()().wrap(function(Z){for(;;)switch(Z.prev=Z.next){case 0:if(!q){Z.next=5;break}return Z.next=3,(0,G.G_)(q,s()(s()({},f),{},{avatar:$}));case 3:Z.next=7;break;case 5:return Z.next=7,(0,G.EA)(s()(s()({},f),{},{avatar:$}));case 7:F(!1),(L=H.current)===null||L===void 0||L.reload();case 9:case"end":return Z.stop()}},I)}));return function(I){return U.apply(this,arguments)}}(),children:[(0,t.jsx)(r.Z,{label:"\u7528\u6237\u540D",name:"userName",rules:[{required:!0,message:"\u7528\u6237\u540D\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,t.jsx)(n.Z,{label:"\u5934\u50CF",children:(0,t.jsx)(me.Z,{imageUrl:$,setImageUrl:N})}),(0,t.jsx)(r.Z,{label:"\u5BC6\u7801",name:"password",rules:[{required:!0,message:"\u5BC6\u7801\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,t.jsx)(r.Z,{label:"\u6635\u79F0",name:"nickName",rules:[]}),(0,t.jsx)(r.Z,{label:"\u540D\u5B57",name:"realName",rules:[{required:!0,message:"\u540D\u5B57\u4E0D\u80FD\u4E3A\u7A7A"}]}),(0,t.jsx)(a.Z,{label:"\u89D2\u8272",options:ye,name:"roleId"}),(0,t.jsx)(oe.Group,{options:[{value:!0,label:"\u662F"},{value:!1,label:"\u5426"}],label:"\u662F\u5426\u90E8\u95E8\u4E3B\u7BA1",name:"isManager"}),(0,t.jsx)(y.A.Item,{label:"\u90E8\u95E8",name:"departmentId",rules:[{required:!0,message:"\u90E8\u95E8\u4E0D\u80FD\u4E3A\u7A7A"}],children:(0,t.jsx)(le.Z,{showSearch:!0,style:{width:"100%"},dropdownStyle:{maxHeight:400,overflow:"auto"},placeholder:"Please select",allowClear:!0,treeDefaultExpandAll:!0,treeData:Te})})]})]})}var he=fe},60556:function(x,M,e){e.d(M,{EA:function(){return y},G_:function(){return g},Ln:function(){return i},aR:function(){return C},kD:function(){return P},vO:function(){return l}});var h=e(90228),s=e.n(h),A=e(87999),d=e.n(A),p=e(11805);function P(r){return _.apply(this,arguments)}function _(){return _=d()(s()().mark(function r(n){var a;return s()().wrap(function(o){for(;;)switch(o.prev=o.next){case 0:return o.next=2,(0,p.request)("/api/v1/departments",{method:"GET",params:{page:n.current,per:n.pageSize}});case 2:return a=o.sent,o.abrupt("return",{data:a.data.list,success:!0,total:a.data.total});case 4:case"end":return o.stop()}},r)})),_.apply(this,arguments)}function l(){return m.apply(this,arguments)}function m(){return m=d()(s()().mark(function r(){return s()().wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.abrupt("return",(0,p.request)("/api/v1/departments",{method:"GET",params:{per:100}}));case 1:case"end":return a.stop()}},r)})),m.apply(this,arguments)}function y(r){return(0,p.request)("/api/v1/departments",{method:"POST",data:r})}function g(r,n){return(0,p.request)("/api/v1/departments/"+r,{method:"PATCH",data:n})}function C(r){return(0,p.request)("/api/v1/departments/"+r,{method:"DELETE"})}function i(r){return(0,p.request)("/api/v1/departments/remove_many",{method:"DELETE",params:{ids:r}})}},23306:function(x,M,e){e.d(M,{EA:function(){return l},G_:function(){return y},LL:function(){return m},Ln:function(){return C},aR:function(){return g},kD:function(){return P}});var h=e(90228),s=e.n(h),A=e(87999),d=e.n(A),p=e(11805);function P(i){return _.apply(this,arguments)}function _(){return _=d()(s()().mark(function i(r){var n;return s()().wrap(function(u){for(;;)switch(u.prev=u.next){case 0:return u.next=2,(0,p.request)("/api/v1/employees",{method:"GET",params:{page:r.current,per:r.pageSize}});case 2:return n=u.sent,u.abrupt("return",{data:n.data.list,success:!0,total:n.data.total});case 4:case"end":return u.stop()}},i)})),_.apply(this,arguments)}function l(i){return(0,p.request)("/api/v1/employees",{method:"POST",data:i})}function m(){return(0,p.request)("/api/v1/employees/user/leave_checkers",{method:"GET"})}function y(i,r){return(0,p.request)("/api/v1/employees/"+i,{method:"PATCH",data:r})}function g(i){return(0,p.request)("/api/v1/employees/"+i,{method:"DELETE"})}function C(i){return(0,p.request)("/api/v1/employees/remove_many",{method:"DELETE",params:{ids:i}})}}}]);
